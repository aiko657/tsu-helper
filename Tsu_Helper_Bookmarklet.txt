javascript:(function(){function e(e){var t,o,n,r,s,a,i,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",u="",f=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");f<e.length;)r=c.indexOf(e.charAt(f++)),s=c.indexOf(e.charAt(f++)),a=c.indexOf(e.charAt(f++)),i=c.indexOf(e.charAt(f++)),t=r<<2|s>>4,o=(15&s)<<4|a>>2,n=(3&a)<<6|i,u+=String.fromCharCode(t),64!=a&&(u+=String.fromCharCode(o)),64!=i&&(u+=String.fromCharCode(n));return u}function t(e){var t=e.split("#").length-1;s(t+" Hashtags found.");var o=e.split("@").length-1;if(s(o+" Mentions found."),c>=t&&u>=o)return null;var n="Limits exceeded, check your message! Are you sure you want to continue?\n";return t>c&&(n+="\n"+t+" #hashtags found. (Max. "+c+")",s("Too many hashtags found! ("+t+")","w")),o>u&&(n+="\n"+o+" @mentions found. (Max. "+u+")",s("Too many mentions found! ("+o+")","w")),confirm(n)}function o(e){var t=null,o=null;if(e.find(".checkboxes_options_create_post input:visible").each(function(){switch($(this).attr("id")){case"facebook":t=$(this).prop("checked");break;case"twitter":o=$(this).prop("checked")}}),!1!==t&&!1!==o)return null;var n="OK = Post to Tsu";return!0===t&&(n+=", Facebook"),!0===o&&(n+=", Twitter"),confirm(n+"\nCancel = Choose other social networks")}function n(e,n){var r=e.find("#message"),s=r.val();r.focus(),(""==s||!1===t(s)||!1===o(e))&&(n.preventDefault(),e.find(".loading").hide(),setTimeout(function(){e.find("#create_post_button").removeAttr("disabled")},500))}function r(){var e=$(".fancybox-overlay #create_post_form");return e.length?(e.find("#message").focus(),e.submit(function(e){return n($(this),e)}),void(h=!1)):void setTimeout(function(){r()},500)}function s(e,t,o){if(i){switch(t){case"i":console.info(e);break;case"w":console.warn(e);break;case"e":console.error(e);break;default:console.log(e)}o&&alert(e)}}function a(){$.getJSON(d,function(t){var o=parseFloat(e(t.content));if(s("Versions: Local ("+l+"), Remote ("+o+")","i"),o>l&&($("#navBarHead .tab.name").css("background-color","#F1B054"),0===$("#tsu-helper-menuitem-update").length)){var n=$("<a/>",{title:"Update Tsu Helper script to the newest version ("+o+")",href:f,html:"Update Tsu Helper!"}).attr("target","_blank").css({"background-color":"#F1B054",color:"#fff"}).click(function(){return confirm("Upgrade to the newest version ("+o+")?\n\n(refresh this page after the script has been updated)")?void 0:!1});$("<li/>",{id:"tsu-helper-menuitem-update",html:n}).appendTo("#navBarHead .sub_nav")}}).fail(function(){s("Couldn't get remote version number for Tsu Helper.","w")})}var i=!1,c=10,u=10,f="https://greasyfork.org/scripts/6372-tsu-helper/code/Tsu%20Helper.user.js",l=1,d="https://api.github.com/repos/noplanman/tsu-helper/contents/VERSION";a(),$("#message").focus(),$("body").on("click",".create_post .options .add_title",function(){var e=$(this).closest("#create_post_form").find("#title");setTimeout(function(){e.focus()},50)}),$("body").on("click",".create_post .options .filebutton, .cancel_icon_createpost",function(){var e=$(this).closest("#create_post_form").find("#message");setTimeout(function(){e.focus()},50)}),$("#create_post_form").submit(function(e){return n($(this),e)});var h=!1;$(".create_post_popup").click(function(){h||(h=!0,r())}),$("body").on("dblclick",".post_header_name, .share_header",function(e){var t=$(this).closest(".post"),o=t.find(".share_header").length,n=!$(this).hasClass("share_header");t.find("#post_link_dropdown a").each(function(){var t=$(this).text().trim().toLowerCase();if(!o&&"open"===t||!n&&"open"===t||n&&"open original post"===t){var r=$(this).attr("href");return void(e.shiftKey?window.open(r,"_blank").focus():window.location=r)}})})})();